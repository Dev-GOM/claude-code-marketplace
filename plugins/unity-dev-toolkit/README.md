# Unity Dev Toolkit

> **Your AI-powered companion for Unity game development**

> ‚ö†Ô∏è **Experimental Feature**
>
> This plugin is currently in **experimental stage**. Features may change, and some functionality might not work as expected. Please report any issues you encounter on [GitHub Issues](https://github.com/Dev-GOM/claude-code-marketplace/issues).
>
> **Known Limitations:**
> - Template generation requires manual parameter input
> - Scene optimization analysis may not cover all Unity versions
> - UI system selection (UGUI vs UI Toolkit) should be determined based on project requirements
> - Skills are model-invoked and may not activate in all contexts

> A comprehensive Claude Code plugin that brings expert Unity development assistance through specialized agents for scripting, refactoring, and optimization, plus intelligent automation and production-ready script templates.

## üåü Features

This plugin integrates three powerful Claude Code features to supercharge your Unity development:

### üìù Slash Commands
Quick access to Unity development tools:
- `/unity:new-script` - Generate Unity scripts with best practices
- `/unity:optimize-scene` - Comprehensive scene performance analysis
- `/unity:setup-test` - Create complete test environments

### ü§ñ Expert Agents
Specialized AI assistants for Unity development:
- `@unity-scripter` - C# scripting expert for clean, performant code
- `@unity-refactor` - Code refactoring specialist for improving quality and maintainability
- `@unity-performance` - Performance optimization specialist
- `@unity-architect` - Game system architecture consultant

### ‚ö° Agent Skills
Model-invoked capabilities that Claude automatically uses when relevant:
- **unity-script-validator** - Validates Unity C# scripts for best practices and performance
- **unity-scene-optimizer** - Analyzes scenes for performance bottlenecks
- **unity-template-generator** - Assists with script template generation
- **unity-ui-selector** - Guides UGUI vs UI Toolkit selection based on project needs
- **unity-uitoolkit** - Assists with UI Toolkit development (UXML, USS, VisualElement API)
- **unity-compile-fixer** - Detects and resolves Unity C# compilation errors using VSCode diagnostics

## üöÄ Installation

### Quick Install

```bash
# Add the marketplace (if not already added)
/plugin marketplace add https://github.com/Dev-GOM/claude-code-marketplace.git

# Install the plugin
/plugin install unity-dev-toolkit@dev-gom-plugins

# Restart Claude Code
claude -r
```

### Verify Installation

```bash
/plugin
```

You should see "unity-dev-toolkit" in the enabled plugins list.

## üìñ Usage

### Creating Unity Scripts

```bash
# Generate a MonoBehaviour script
/unity:new-script MonoBehaviour PlayerController

# Generate a ScriptableObject
/unity:new-script ScriptableObject WeaponData

# Generate an Editor script
/unity:new-script EditorScript CustomTool

# Generate a test script
/unity:new-script TestScript PlayerControllerTests
```

The generated scripts include:
- ‚úÖ Unity best practices and conventions
- ‚úÖ Proper region organization
- ‚úÖ XML documentation comments
- ‚úÖ Performance-conscious patterns
- ‚úÖ Null safety and validation
- ‚úÖ Component caching
- ‚úÖ Complete lifecycle methods

**Example Generated MonoBehaviour:**
```csharp
using UnityEngine;

namespace MyGame.Player
{
    /// <summary>
    /// Handles player movement and input
    /// </summary>
    public class PlayerController : MonoBehaviour
    {
        #region Serialized Fields
        [SerializeField] private float moveSpeed = 5f;
        [SerializeField] private float jumpForce = 10f;
        #endregion

        #region Private Fields
        private Rigidbody rb;
        private bool isGrounded;
        #endregion

        #region Unity Lifecycle
        private void Awake()
        {
            rb = GetComponent<Rigidbody>();
        }

        private void Update()
        {
            HandleInput();
        }

        private void FixedUpdate()
        {
            ApplyMovement();
        }
        #endregion

        #region Private Methods
        private void HandleInput()
        {
            // Input handling logic
        }

        private void ApplyMovement()
        {
            // Physics-based movement
        }
        #endregion
    }
}
```

### Optimizing Scene Performance

```bash
# Analyze current scene
/unity:optimize-scene

# Analyze specific scene
/unity:optimize-scene Assets/Scenes/GameLevel.unity

# Full project analysis
/unity:optimize-scene --full-project
```

The optimization analysis covers:
- üé® **Rendering**: Draw calls, batching, materials, textures
- ‚ö° **Physics**: Rigidbody, colliders, collision matrix
- üìú **Scripting**: Update loops, component caching, GC allocation
- üíæ **Memory**: Texture usage, asset loading, object pooling
- üì± **Mobile**: Platform-specific optimizations

**Sample Analysis Output:**
```markdown
# Unity Scene Performance Analysis

## Current Metrics
- Draw Calls: 250 ‚ö†Ô∏è
- Triangles: 75,000 ‚ö†Ô∏è
- Active GameObjects: 450
- Script Components: 120

## Critical Issues
1. üî¥ Excessive draw calls (250, target: <100)
2. üî¥ 5 uncompressed 4096x4096 textures
3. üü° Missing static batching on 50+ objects

## Recommendations
1. Enable static batching...
2. Combine materials...
3. Implement object pooling...

## Estimated Impact
- Draw calls: 250 ‚Üí 80 (68% reduction)
- Frame time: 25ms ‚Üí 12ms (52% improvement)
```

### Setting Up Tests

```bash
# Setup tests for a script
/unity:setup-test PlayerController

# Setup PlayMode tests
/unity:setup-test playmode PlayerMovement

# Setup full test environment
/unity:setup-test --full-project
```

Generated test suites include:
- ‚úÖ Complete test structure with Setup/TearDown
- ‚úÖ Unit tests for individual methods
- ‚úÖ PlayMode tests for Unity lifecycle
- ‚úÖ Integration tests for component interaction
- ‚úÖ Performance benchmarks
- ‚úÖ Edge case coverage
- ‚úÖ Assembly definition files

**Example Test:**
```csharp
[Test]
public void Jump_WhenGrounded_IncreasesYPosition()
{
    // Arrange
    var initialY = player.transform.position.y;

    // Act
    player.Jump();

    // Assert
    Assert.Greater(player.transform.position.y, initialY);
}
```

### Using Expert Agents

You can invoke agents directly in your conversation:

```
@unity-scripter create a player controller with WASD movement and jumping

@unity-performance analyze why my game is dropping to 30 fps

@unity-architect how should I structure my inventory system?
```

**Agent Specializations:**

**@unity-scripter**
- C# scripting best practices
- Unity API expertise
- Component architecture
- Performance-conscious coding
- Code organization

**@unity-refactor**
- Code quality improvement
- Design pattern application
- Legacy code modernization
- SOLID principles
- Test-driven refactoring

**@unity-performance**
- Profiling and benchmarking
- Rendering optimization
- Memory management
- CPU/GPU optimization
- Platform-specific tuning

**@unity-architect**
- System design patterns
- Project structure
- ScriptableObject architecture
- Dependency management
- Scalable game systems

## üîß How It Works

### Agent Skills System

Agent Skills are **model-invoked** - Claude automatically decides when to use them based on your requests. You don't need to explicitly call them; they activate when relevant.

**1. Script Validation Skill**
When you ask Claude to review Unity scripts, the `unity-script-validator` skill automatically:
- ‚úÖ Checks for public fields (suggests [SerializeField] private)
- ‚úÖ Detects GetComponent in Update loops
- ‚úÖ Identifies string concatenation issues
- ‚úÖ Suggests XML documentation
- ‚úÖ Recommends namespace usage
- ‚úÖ Checks for cached references

**Example Usage:**
```
You: Can you review this Unity script for best practices?

Claude activates unity-script-validator and provides:
üéÆ Unity Script Analysis

‚ö†Ô∏è Issues Found:
- GetComponent() called in Update - cache in Awake
- Public fields found - use [SerializeField] private

üí° Suggestions:
- Add XML documentation to public methods
- Use #region directives to organize code
```

**2. Scene Optimization Skill**
When discussing Unity scene performance, the `unity-scene-optimizer` skill helps analyze:
- ‚ö†Ô∏è High GameObject counts
- ‚ö†Ô∏è Excessive realtime lights
- ‚ö†Ô∏è Draw call optimization
- ‚ö†Ô∏è Texture compression
- üí° Batching opportunities

**3. UI System Selection Skill**
When starting UI development, the `unity-ui-selector` skill guides you through choosing between UGUI and UI Toolkit based on:
- Target Unity version
- Project complexity
- Platform requirements
- Team experience

**4. Compile Error Resolver Skill**
When Unity projects have compilation errors, the `unity-compile-fixer` skill automatically:
- üîç Collects errors from VSCode diagnostics (OmniSharp C# language server)
- üìä Analyzes error patterns against common Unity issues database
- üí° Proposes context-aware solutions for user approval
- üîß Applies fixes while preserving code structure
- ‚úÖ Verifies version control status for Unity .meta files

**Example Usage:**
```
You: My Unity project has compiler errors, can you fix them?

Claude activates unity-compile-fixer and provides:
üîç Found 3 C# Compilation Errors

‚ùå CS0246 at PlayerController.cs:45
   The type or namespace name 'Rigidbody' could not be found

üí° Proposed Fix:
   Add 'using UnityEngine;' at the top of PlayerController.cs

‚ùå CS1061 at GameManager.cs:23
   'GameObject' does not contain a definition for 'position'

üí° Proposed Fix:
   Use 'transform.position' instead of 'gameObject.position'

‚úÖ Apply all fixes? [Yes/No]
```

### Script Templates

The plugin includes production-ready templates:

**MonoBehaviour Template** (`templates/MonoBehaviour.cs.template`)
- Complete lifecycle methods
- Region organization
- Component caching
- XML documentation
- Validation helpers
- Gizmo drawing

**ScriptableObject Template** (`templates/ScriptableObject.cs.template`)
- CreateAssetMenu attribute
- Property accessors
- Data validation
- Clone method
- Custom editor hooks

**Editor Script Template** (`templates/EditorScript.cs.template`)
- EditorWindow structure
- Tab system
- Settings persistence
- Context menus
- Progress bars
- Asset utilities

**Test Script Template** (`templates/TestScript.cs.template`)
- Complete test structure
- Setup/TearDown
- PlayMode tests
- Performance tests
- Edge case handling
- Helper methods

**Editor UI Toolkit Template Set** (3 files: C#, UXML, USS)
- `templates/EditorScriptUIToolkit.cs.template` - UI Toolkit EditorWindow
- `templates/EditorScriptUIToolkit.uxml.template` - UXML structure
- `templates/EditorScriptUIToolkit.uss.template` - USS styling
- VisualElement-based editor tools
- Query API for element references
- Event handling system
- EditorPrefs settings persistence
- Dark theme optimized styles

**Runtime UI Toolkit Template Set** (3 files: C#, UXML, USS)
- `templates/RuntimeUIToolkit.cs.template` - UIDocument MonoBehaviour
- `templates/RuntimeUIToolkit.uxml.template` - Game UI structure
- `templates/RuntimeUIToolkit.uss.template` - Game UI styling
- Complete game UI system (HUD, menus, inventory)
- UIDocument integration
- Runtime event handling
- Visibility control with pause support
- Responsive design for mobile

## üéØ Workflow Example

Here's a typical Unity development workflow with this plugin:

```bash
# 1. Create a new player controller
/unity:new-script MonoBehaviour PlayerController
# Claude generates a complete, documented script following Unity best practices

# 2. Ask the scripting expert for help
@unity-scripter add input handling with the new Input System
# Expert agent implements modern Unity Input System

# 3. Ask Claude to review the script
# Claude automatically uses unity-script-validator skill

# 4. Create tests
/unity:setup-test PlayerController
# Complete test suite generated

# 5. Optimize the scene
/unity:optimize-scene Assets/Scenes/GameLevel.unity
# Comprehensive performance analysis provided

# 6. Consult the architect
@unity-architect how should I structure the enemy spawning system?
# Get architectural guidance

# 7. Performance optimization
@unity-performance the game is slow on mobile devices
# Get platform-specific optimization recommendations
```

## ‚öôÔ∏è Configuration

### Customizing Templates

Templates use placeholders that are replaced during generation:
- `{{CLASS_NAME}}`: The script class name
- `{{NAMESPACE}}`: The namespace
- `{{DESCRIPTION}}`: Script description
- `{{FILE_NAME}}`: Output file name
- `{{MENU_PATH}}`: Unity menu path
- `{{WINDOW_TITLE}}`: Editor window title

### Disabling Skills

Skills are automatically used by Claude when relevant. To prevent a specific skill from being used, you can temporarily disable the plugin:

```bash
/plugin disable unity-dev-toolkit
```

To re-enable:
```bash
/plugin enable unity-dev-toolkit
```

## üéì Best Practices

### Script Organization

```
Assets/
‚îú‚îÄ‚îÄ Scripts/
‚îÇ   ‚îú‚îÄ‚îÄ Runtime/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Player/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Enemy/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Systems/
‚îÇ   ‚îî‚îÄ‚îÄ Editor/
‚îÇ       ‚îî‚îÄ‚îÄ Tools/
‚îú‚îÄ‚îÄ Data/
‚îÇ   ‚îî‚îÄ‚îÄ ScriptableObjects/
‚îî‚îÄ‚îÄ Tests/
    ‚îú‚îÄ‚îÄ EditMode/
    ‚îî‚îÄ‚îÄ PlayMode/
```

### Unity Coding Conventions

```csharp
// ‚úÖ Good
[SerializeField] private float moveSpeed = 5f;
private Rigidbody rb;

void Awake()
{
    rb = GetComponent<Rigidbody>();  // Cache reference
}

void Update()
{
    rb.velocity = ...;  // Use cached reference
}

// ‚ùå Bad
public float moveSpeed = 5f;  // Public field

void Update()
{
    GetComponent<Rigidbody>().velocity = ...;  // Expensive!
}
```

### Performance Patterns

**Object Pooling:**
```csharp
// Reuse objects instead of Instantiate/Destroy
public class BulletPool
{
    private Queue<Bullet> pool = new Queue<Bullet>();

    public Bullet Get()
    {
        if (pool.Count > 0)
        {
            var bullet = pool.Dequeue();
            bullet.gameObject.SetActive(true);
            return bullet;
        }
        return Instantiate(bulletPrefab);
    }

    public void Return(Bullet bullet)
    {
        bullet.gameObject.SetActive(false);
        pool.Enqueue(bullet);
    }
}
```

**Avoid Allocations:**
```csharp
// ‚ùå Bad: Allocates every frame
void Update()
{
    string text = "Score: " + score.ToString();
}

// ‚úÖ Good: No allocations
private StringBuilder sb = new StringBuilder(32);

void Update()
{
    sb.Clear();
    sb.Append("Score: ");
    sb.Append(score);
}
```

## üêõ Troubleshooting

### Plugin Not Working

1. Check installation:
   ```bash
   /plugin
   ```

2. Verify Node.js is installed:
   ```bash
   node --version
   ```

3. Enable debug mode:
   ```bash
   claude --debug
   ```

### Skills Not Activating

Skills are model-invoked and Claude decides when to use them. If a skill doesn't activate:

1. Try being more specific in your request
2. Mention keywords like "Unity script", "scene performance", or "UI system"
3. Check that the plugin is enabled: `/plugin`
4. Restart Claude Code: `claude -r`

### Agents Not Responding

1. Check agent files have valid YAML frontmatter
2. Use correct format: `@unity-scripter`
3. Ensure `.md` extension, not `.json`

## ü§ù Contributing

Contributions are welcome! You can:

1. Fork the repository
2. Add new templates
3. Improve agents and skills
4. Enhance commands
5. Share your improvements

## üìÑ License

MIT License - free to use and modify for your projects.

## üéÆ Unity Version Compatibility

This plugin works with:
- ‚úÖ Unity 2019.4 LTS and later
- ‚úÖ Unity 2020.3 LTS
- ‚úÖ Unity 2021.3 LTS
- ‚úÖ Unity 2022.3 LTS
- ‚úÖ Unity 6 (2023+)

## üìã Changelog

### v1.3.0 (2025-10-22)
- üîß **New Skill**: Added `unity-compile-fixer` skill for automated C# compilation error detection and resolution
- üîç **VSCode Integration**: Leverages VSCode diagnostics (OmniSharp) for real-time error detection
- üìä **Error Pattern Database**: Includes comprehensive Unity C# error patterns (CS0246, CS0029, CS1061, etc.)
- üí° **Smart Solutions**: Proposes context-aware fixes based on error analysis
- ‚úÖ **VCS Support**: Handles Unity .meta file conflicts and version control integration
- üìù **Analysis Scripts**: Includes Node.js script for processing VSCode diagnostics

### v1.2.0 (2025-10-18)
- üé® **UI Toolkit Templates**: Added complete UI Toolkit templates for both Editor and Runtime (6 files total)
- üìù **Editor Templates**: EditorWindow with UXML/USS (C#, UXML, USS)
- üéÆ **Runtime Templates**: UIDocument for game UI with UXML/USS (C#, UXML, USS)
- ‚ö° **New Skill**: Added `unity-uitoolkit` skill for UI Toolkit development assistance
- üìö **Template Count**: Increased from 7 to 10 production-ready templates
- üîó **Cross-References**: Updated Skills to reference new UI Toolkit capabilities

### v1.1.0 (2025-10-18)
- ü§ñ **New Agent**: Added `@unity-refactor` agent for code refactoring and quality improvement
- üìù **Skills Enhancement**: Added "When to Use vs Other Components" sections to all Skills
- üîó **Component Integration**: Clear guidance on when to use Skills vs Agents vs Commands
- üìö **Documentation**: Improved cross-component references and usage patterns

### v1.0.1 (2025-10-18)
- üìù **Skill Documentation Optimization**: Simplified SKILL.md files (834 ‚Üí 197 lines, 76% reduction)
- üéØ **Progressive Disclosure**: Applied best practices for concise skill documentation
- üóëÔ∏è **Removed Redundancy**: Eliminated "When to Use This Skill" sections (skill activation is determined by description field)
- ‚ö° **Token Efficiency**: Reduced context size for faster skill loading and activation

### v1.0.0 (2025-10-18)
- üéâ Initial release
- üìù 3 slash commands: `/unity:new-script`, `/unity:optimize-scene`, `/unity:setup-test`
- ü§ñ 3 expert agents: `@unity-scripter`, `@unity-performance`, `@unity-architect`
- ‚ö° 4 Agent Skills: `unity-script-validator`, `unity-scene-optimizer`, `unity-template-generator`, `unity-ui-selector`
- üìÑ Production-ready templates for MonoBehaviour, ScriptableObject, Editor, and Test scripts

## üôè Credits

Created for the Unity and Claude Code communities to enhance game development productivity through intelligent AI assistance.

---

**Happy Unity Development!** üöÄüéÆ

For issues or suggestions, please open an issue on GitHub.
